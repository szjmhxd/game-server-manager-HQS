{% extends "layout.html" %}

{% block content %}
{% if mode == "add" %}
<h2>新增配置文件</h2>
<form method="post" action="{{ url_for('views.add_config') }}">
    <div class="form-group">
        <label>类型：</label>
        <select name="type" required>
            <option value="qu" selected>qu</option>
            <option value="modlist">modlist</option>
        </select>
    </div>
    <div class="form-group">
        <label>配置文件名称：</label>
        <input type="text" name="name" required>
    </div>
    <div class="form-group">
        <label>版本：</label>
        <input type="text" name="version" required>
    </div>
    <div class="form-group">
        <label>文件路径：</label>
        <input type="text" name="path" required>
    </div>
    <div class="form-group">
        <label>备注：</label>
        <input type="text" name="remark">
    </div>
    <button type="submit" class="btn">添加配置文件</button>
    <a href="{{ url_for('views.index') }}" class="btn">返回</a>
</form>
{% else %}
<h2>编辑配置文件：{{ file['name'] }}</h2>
<form method="post" action="{{ url_for('views.edit_config', file_id=file['id']) }}">
    <div class="form-group">
        <label>类型：</label>
        <select name="type" required>
            <option value="qu" {% if file['type']=='qu' %}selected{% endif %}>qu</option>
            <option value="modlist" {% if file['type']=='modlist' %}selected{% endif %}>modlist</option>
        </select>
    </div>
    <div class="form-group">
        <label>配置文件名称：</label>
        <input type="text" name="name" value="{{ file['name'] }}" required>
    </div>
    <div class="form-group">
        <label>版本：</label>
        <input type="text" name="version" value="{{ file['version'] }}" required>
    </div>
    <div class="form-group">
        <label>文件路径：</label>
        <input type="text" name="path" value="{{ file['path'] }}" required>
    </div>
    <div class="form-group">
        <label>备注：</label>
        <input type="text" name="remark" value="{{ file['remark'] or '' }}">
    </div>
    <button type="submit" class="btn">保存修改</button>
    <a href="{{ url_for('views.index') }}" class="btn">返回</a>
</form>
{% endif %}
{% endblock %}